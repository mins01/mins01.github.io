---
title: "외부 서버의 디스크 백업하는 방법 하나."
date: 2012-02-16 16:31:05 +0900
categories: [server]
---

#!/bin/bash  
# 20120116 admin  
# registed Crontab# 0 5 * * * /bin/bash /root/file_backup.sh &amp;gt; /dev/null 2&amp;gt;&amp;amp;1#  
export LANG=ko_KR.euckr  
HNAME=`uname -n`LOGDIR='/root/log'SYSADMIN="admin@admin.com"BACKUPDATE=`date --date='now' +%Y%m%d`CONTENTS="[FileServerBackup] $HNAME Server $BACKUPDATE Batch Job Report"LOGFILE="$LOGDIR/$BACKUPDATE-file_backup.sh_log"  
# IO redirection for logging.exec 6&amp;gt;&amp;amp;1       # Link file descriptor #6 with stdout.                # Saves stdout.exec &amp;gt; $LOGFILE # stdout replaced with file $LOGFILE.  
# 외부서버 디스크 마운트mkdir /file_backupmount /dev/sdc1  /filemount -t cifs //XXX.XXX.XXX.XXX/YYY/ /file_backup -o username=USER,password=PASS,iocharset=euc-kr,ro  
# RSYNC 로 복사DIRLIST=`ls -D /file_backup/`for DIRL in $DIRLISTdo        rsync -av /file_backup/$DIRL   /file/done  
# 외부서버 디스크 언마운트umount /file_backupumount /filerm -rf /file_backup  
#Clean up IO redirectionexec 1&amp;gt;&amp;amp;6 6&amp;gt;&amp;amp;-      # Restore stdout and close file descriptor #6.  
/bin/cat $LOGFILE | mail -s "$CONTENTS" $SYSADMIN


[🔗link](http://www.mins01.com/mh/tech/read/759)