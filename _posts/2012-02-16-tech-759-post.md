---
title: "ì™¸ë¶€ ì„œë²„ì˜ ë””ìŠ¤í¬ ë°±ì—…í•˜ëŠ” ë°©ë²• í•˜ë‚˜."
date: 2012-02-16 16:31:05 +0900
categories: [server]
---

#!/bin/bash  
# 20120116 admin  
# registed Crontab# 0 5 * * * /bin/bash /root/file_backup.sh &amp;gt; /dev/null 2&amp;gt;&amp;amp;1#  
export LANG=ko_KR.euckr  
HNAME=`uname -n`LOGDIR='/root/log'SYSADMIN="admin@admin.com"BACKUPDATE=`date --date='now' +%Y%m%d`CONTENTS="[FileServerBackup] $HNAME Server $BACKUPDATE Batch Job Report"LOGFILE="$LOGDIR/$BACKUPDATE-file_backup.sh_log"  
# IO redirection for logging.exec 6&amp;gt;&amp;amp;1 Â  Â  Â  # Link file descriptor #6 with stdout.Â  Â  Â  Â  Â  Â  Â  Â  # Saves stdout.exec &amp;gt; $LOGFILE # stdout replaced with file $LOGFILE.  
# ì™¸ë¶€ì„œë²„ ë””ìŠ¤í¬ ë§ˆìš´íŠ¸mkdir /file_backupmount /dev/sdc1 Â /filemount -t cifs //XXX.XXX.XXX.XXX/YYY/ /file_backup -o username=USER,password=PASS,iocharset=euc-kr,ro  
# RSYNC ë¡œ ë³µì‚¬DIRLIST=`ls -D /file_backup/`for DIRL in $DIRLISTdoÂ  Â  Â  Â  rsync -av /file_backup/$DIRL Â  /file/done  
# ì™¸ë¶€ì„œë²„ ë””ìŠ¤í¬ ì–¸ë§ˆìš´íŠ¸umount /file_backupumount /filerm -rf /file_backup  
#Clean up IO redirectionexec 1&amp;gt;&amp;amp;6 6&amp;gt;&amp;amp;- Â  Â  Â # Restore stdout and close file descriptor #6.  
/bin/cat $LOGFILE | mail -s "$CONTENTS" $SYSADMIN


[ğŸ”—link](http://www.mins01.com/mh/tech/read/759)