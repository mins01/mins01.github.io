---
title: "log4j 2.x  "
date: 2014-06-17 13:39:16 +0900
categories: [java]
---

- 아파치 메뉴얼 ( [http://logging.apache.org/log4j/2.x/manual/index.html](http://logging.apache.org/log4j/2.x/manual/index.html "http://logging.apache.org/log4j/2.x/manual/index.html") )
- [설정](http://logging.apache.org/log4j/2.x/manual/configuration.html#Appenders "설정")
- 메이븐에서 사용시 설정파일 위치
- src/test/resources/log4j2-test.xml (test용)
- src/main/resources/log4j2.xml
- 주의 log4j.xml 에서 log4j2.xml 로 설정 파일 이름비 바꿨음

-   



  
- - - - - -

#기본 사용&lt;div&gt;import com.foo.Bar;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;// Import log4j classes.&lt;/div&gt;&lt;div&gt;**import org.apache.logging.log4j.Logger;**&lt;/div&gt;&lt;div&gt;**import org.apache.logging.log4j.LogManager;**&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;public class MyApp {&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;// Define a static logger variable so that it references the&lt;/div&gt;&lt;div&gt;// Logger instance named "MyApp".&lt;/div&gt;&lt;div&gt;**static final Logger logger = LogManager.getLogger(MyApp.class.getName());**&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;public static void main(String[] args) {&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;// Set up a simple configuration that logs on the console.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;**&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;logger.trace("Entering application.");**&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;Bar bar = new Bar();&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;if (!bar.doIt()) {&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;**logger.error("Didn't do it.");&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;**&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;}&lt;/div&gt;&lt;div&gt;**&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;logger.trace("Exiting application."); **                &lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;  
- - - - - -

#기본 설정 파일 log4j2.xml (json도 가능)&lt;div&gt;&amp;amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;amp;gt;&lt;/div&gt;&lt;div&gt;&amp;amp;lt;configuration status="DEBUG"&amp;amp;gt;&lt;/div&gt;&lt;div&gt; &amp;amp;lt;appenders&amp;amp;gt;&lt;/div&gt;&lt;div&gt;  &amp;amp;lt;Console name="Console" target="SYSTEM_OUT"&amp;amp;gt;&lt;/div&gt;&lt;div&gt;   &amp;amp;lt;PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n" /&amp;amp;gt;&lt;/div&gt;&lt;div&gt;  &amp;amp;lt;/Console&amp;amp;gt;&lt;/div&gt;&lt;div&gt;  &amp;amp;lt;!--&lt;/div&gt;&lt;div&gt;  &amp;amp;lt;Socket name="socket" host="localhost" port="28080"&lt;/div&gt;&lt;div&gt;   immediateFlush="true"&amp;amp;gt;&lt;/div&gt;&lt;div&gt;   --&amp;amp;gt;&lt;/div&gt;&lt;div&gt;   &amp;amp;lt;!--&lt;/div&gt;&lt;div&gt;   &amp;amp;lt;SerializedLayout /&amp;amp;gt;&lt;/div&gt;&lt;div&gt;   --&amp;amp;gt;&lt;/div&gt;&lt;div&gt;   &amp;amp;lt;!--&lt;/div&gt;&lt;div&gt;   &amp;amp;lt;PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n" /&amp;amp;gt;&lt;/div&gt;&lt;div&gt;  &amp;amp;lt;/Socket&amp;amp;gt;&lt;/div&gt;&lt;div&gt;  --&amp;amp;gt;&lt;/div&gt;&lt;div&gt; &amp;amp;lt;/appenders&amp;amp;gt;&lt;/div&gt;&lt;div&gt; &amp;amp;lt;loggers&amp;amp;gt;&lt;/div&gt;&lt;div&gt;  &amp;amp;lt;root level="**error**"&amp;amp;gt; &amp;amp;lt;!-- 이 부분을 debug로 바꾸면 모든 메세지가 보임 --&amp;amp;gt;&lt;/div&gt;&lt;div&gt;   &amp;amp;lt;appender-ref ref="Console" /&amp;amp;gt;&lt;/div&gt;&lt;div&gt;   &amp;amp;lt;!-- &amp;amp;lt;appender-ref ref="socket" /&amp;amp;gt; --&amp;amp;gt;&lt;/div&gt;&lt;div&gt;  &amp;amp;lt;/root&amp;amp;gt;&lt;/div&gt;&lt;div&gt; &amp;amp;lt;/loggers&amp;amp;gt;&lt;/div&gt;&lt;div&gt;&amp;amp;lt;/configuration&amp;amp;gt;&lt;/div&gt;  
  



[🔗link](http://www.mins01.com/mh/tech/read/884)