---
title: "ë¼ë¼ë²¨, laravel ë¡œ ìƒ˜í”Œ ë§Œë“¤ì–´ ë³´ì. (3) - model, seeder"
date: 2019-01-09 15:06:53 +0900
categories: 
---
[ğŸ”—link](http://www.mins01.com/mh/tech/read/1242)
***


### model íŒŒì¼ ìˆ˜ì •

app\SimpleComment.php

  
    <?php
    
    <br></br>
    
    namespace App;
    
    <br></br>
    
    use Illuminate\Database\Eloquent\Model;
    
    use Illuminate\Database\Eloquent\SoftDeletes;
    
    use Illuminate\Support\Facades\Hash;
    
    <br></br><br></br>
    
    class SimpleComment extends Model
    
    {
    
    	use SoftDeletes;
    
    	protected $primaryKey ='sc_id'; //ì—†ì„ ê²½ìš° id ê°€ ê¸°ë³¸ê°’
    
    	protected $dates = ['deleted_at'];
    
    	
    
    	protected $fillable=['sc_name','sc_comment',];
    
    	//-- ìë™ ì•”í˜¸í™”
    
    	public function setScPassAttribute($value)
    
    	{
    
    		// $this->attributes['sc_pass'] = \Crypt::encrypt($value); //ì–‘ë°©í–¥ ì•”í˜¸í™”
    
    		$this->attributes['sc_pass'] = self::hash($vaule); //í•´ì‰¬
    
    		
    
    	}
    
    	// public function getScPassAttribute($value)
    
    	// {
    
    	// 	return \Crypt::decrypt($value); //ì–‘ë°©í–¥ ë³µí˜¸í™”
    
    	// }
    
    	
    
    	public static function hash($v){
    
    		return Hash::make($v);
    
    	}
    
    	public function checkScPass($v){
    
    		return Hash::check($v, $this->attributes['sc_pass']);
    
    	}
    
    	
    
    	public static function lists(){
    
    		return self::orderBy('sc_id','desc')->get();
    
    	}
    
    }
    
    
    
    <br></br>
  
  
### seeder ìƒì„±

    $ php artisan make:seeder SimpleCommentSeeder
    
    Seeder created successfully.
    



database\seeds\SimpleCommentSeeder.php





    <?php
    
    <br></br>
    
    use Illuminate\Database\Seeder;
    
    <br></br>
    
    class SimpleCommentSeeder extends Seeder
    
    {
    
    Â  Â  /**
    
    Â  Â  Â * Run the database seeds.
    
    Â  Â  Â *
    
    Â  Â  Â * @return void
    
    Â  Â  Â */
    
    Â  Â  public function run()
    
    Â  Â  {
    
    Â  Â  Â  $sc = new App\SimpleComment();
    
    Â  Â  Â  for($i=0,$m=20;$i<$m;$i++){
    
    Â  Â  Â  Â  $t = str_repeat(rand(0,9), 4);
    
    Â  Â  Â  Â  $sc->create([
    
    Â  Â  Â  Â  Â  // 'sc_id'=>null,
    
    Â  Â  Â  Â  Â  'sc_name'=>$t,
    
    Â  Â  Â  Â  Â  'sc_pass'=>$t,
    
    Â  Â  Â  Â  Â  'sc_comment'=>md5(rand(1,9))." ".md5(rand(1,9)),
    
    Â  Â  Â  Â  ]);
    
    
    
    Â  Â  Â  }
    
    Â  Â  }
    
    
    
    }
    
    
    
    
    

database\seeds\DatabaseSeeder.php



    <?php
    
    <br></br>
    
    use Illuminate\Database\Seeder;
    
    <br></br>
    
    class DatabaseSeeder extends Seeder
    
    {
    
    Â  /**
    
    Â  * Seed the application's database.
    
    Â  *
    
    Â  * @return void
    
    Â  */
    
    Â  public function run()
    
    Â  {
    
    Â  Â  // $this->call(UsersTableSeeder::class);
    
    Â  Â  $this->call(SimpleCommentSeeder::class); //<-- ì¶”ê°€
    
    Â  }
    
    }
    

  
    $ php artisan db:seed
    
    Seeding: SimpleCommentSeeder
    
    Database seeding completed successfully.
    

  
- - - - - -

    SELECT COUNT(*) FROM `simple_comments`;<br></br>=>
    
    count(*)Â Â 
    
    ----------
    
    Â  Â  Â  Â  20
    
    
    
    <br></br>
    
    SELECT * FROM `simple_comments` ORDER BY sc_id DESCÂ  LIMIT 3;<br></br>=>
    
    Â sc_idÂ  sc_nameÂ  sc_passÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â sc_commentÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  created_atÂ  Â  Â  Â  Â  Â updated_atÂ  deleted_atÂ  remember_tokenÂ Â 
    
    ------Â  -------Â  ------------------------------------------------------------Â  -----------------------------------------------------------------Â  -------------------Â  -------------------Â  ----------Â  ----------------
    
    Â  Â  20Â  7777Â  Â  Â $2y$10$FyKTT.7oaPEAFpgMJyGU5egWz8IBhIrWE/AqfMPkuNMuhOjh2qFM.Â  eccbc87e4b5ce2fe28308fd9f2a7baf3 c81e728d9d4c2f636f067f89cc14862cÂ  2019-01-09 06:48:20Â  2019-01-09 06:48:20Â  Â  Â  (NULL)Â  (NULL)Â  Â  Â  Â  Â Â 
    
    Â  Â  19Â  4444Â  Â  Â $2y$10$avpMbRS/cBxnxupZR7iIrOU3nz3PTWaESJyeHICCh8ZXy49s/IrHSÂ  c4ca4238a0b923820dcc509a6f75849b 45c48cce2e2d7fbdea1afc51c7c6ad26Â  2019-01-09 06:48:20Â  2019-01-09 06:48:20Â  Â  Â  (NULL)Â  (NULL)Â  Â  Â  Â  Â Â 
    
    Â  Â  18Â  7777Â  Â  Â $2y$10$cyva/pIVnpKe/Uu6qYM0teo9tuIQ6WEFbHpu9wZXMZ5uB41866teaÂ  8f14e45fceea167a5a36dedd4bea2543 45c48cce2e2d7fbdea1afc51c7c6ad26Â  2019-01-09 06:48:20Â  2019-01-09 06:48:20Â  Â  Â  (NULL)Â  (NULL)Â  Â  Â  Â  Â Â 
    
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
    
    
    
    
    

  
  


$ php artisan make:controller WebSimpleCommentController

Controller created successfully.



  

