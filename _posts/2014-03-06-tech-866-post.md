---
title: "ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬ì—ì„œ MyBatis ì‚¬ìš©"
date: 2014-03-06 16:08:16 +0900
categories: 
---
  

[ì„¤ëª…ì˜ëœê³³](http://mybatis.github.io/mybatis-3/ko/sqlmap-xml.html "ì„¤ëª…ì˜ëœê³³")  
- - - - - -


pom.xml  
&lt;!-- Â MyBatis --&gt;  
		&lt;dependency&gt;  
		 Â  Â &lt;groupId&gt;org.mybatis&lt;/groupId&gt;  
		 Â  Â &lt;artifactId&gt;mybatis&lt;/artifactId&gt;  
		 Â  Â &lt;version&gt;3.2.2&lt;/version&gt;  
		&lt;/dependency&gt;  
- - - - - -


ì„¤ì •íŒŒì¼  
- - - - - -

context-mapper.xml // spring ìª½ì—ì„œ ì½ì–´ê°€ë„ë¡ ë˜ì–´ìˆì–´ì•¼í•¨.  
  
&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
&lt;beans xmlns="http://www.springframework.org/schema/beans"  
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
	xmlns:aop="http://www.springframework.org/schema/aop"  
	xmlns:tx="http://www.springframework.org/schema/tx"  
	xmlns:util="http://www.springframework.org/schema/util"  
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  
	http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsdÂ   
	http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd			  
	http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd"&gt;  
  
	&lt;!-- SqlSession setup for MyBatis Database Layer --&gt;  
	&lt;bean id="sqlSession" class="org.mybatis.spring.SqlSessionFactoryBean"&gt;  
		&lt;property name="dataSource" ref="dataSource" /&gt;  
		&lt;property name="configLocation" value="classpath:/egovframework/sqlmap/mybatis/sql-mapper-config.xml" /&gt;  
		&lt;property name="mapperLocations" value="classpath:/egovframework/sqlmap/mybatis/mappers/*.xml" /&gt;  
	&lt;/bean&gt;  
  
	&lt;!-- MapperConfigurer setup for MyBatis Database Layer with @Mapper("deptMapper") in DeptMapper Interface --&gt;  
	&lt;!-- @Mapper ì–´ë…¸ì¼€ì´ì…˜ì„ ì½ì–´ì˜¤ë„ë¡ í•œë‹¤.(ê·¸ëƒ¥ ë‹¤ë¥¸ê±° ì¨ë„ ë ê²ƒ ê°™ì€ë°-&gt;ì•ˆë˜ë”ë¼.) --&gt;	  
Â 	&lt;bean class="egovframework.rte.psl.dataaccess.mapper.MapperConfigurer"&gt;  
		&lt;property name="basePackage" value="temp" /&gt;  
	&lt;/bean&gt;  
  
&lt;/beans&gt;	- - - - - -

sql-mapper-config.xml  
  
&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;  
  
&lt;configuration&gt;  
Â  Â  &lt;!-- mapperì—ì„œ ì‚¬ìš©í•  íŒ¨í‚¤ì§€ê¹Œì§€ í‘œí˜„í•œ í´ë˜ìŠ¤ì˜ ë³„ì¹­, ë‹¨ìˆœí•œ ë³„ì¹­ì´ë‹¤. ì—†ì„ ê²½ìš° í’€íŒ¨ìŠ¤ë¡œ í‘œí˜„ --&gt;  
Â  Â  &lt;typeAliases&gt;  
Â  Â Â 	&lt;typeAlias alias="TempVO" type="temp.example.TempVO" /&gt;  
Â  Â Â 	  
Â  Â  &lt;/typeAliases&gt;  
Â  Â Â   
&lt;!-- JAVAíŒŒì¼ì—ì„œ ì§€ì •í•  ê²ƒì´ë¼ì„œ ì—¬ê¸°ì„œ ì§€ì • ì•ˆí•¨.  
	&lt;mappers&gt;  
Â  Â  Â  Â  &lt;mapper resource="META-INF/sqlmap/mappers/mysql/department_mysql.xml" /&gt;  
Â  Â  Â  Â  &lt;mapper resource="META-INF/sqlmap/mappers/mysql/employee_mysql.xml" /&gt;  
Â  Â &lt;/mappers&gt;Â   
Â --&gt;  
Â   
&lt;/configuration&gt;
- - - - - -

mapper_SQL_mysql.xml  
  
  
&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
&lt;!DOCTYPE mapper Â  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;  
  
&lt;mapper namespace="temp.ex.mybatis.ExMapper"&gt;  
	&lt;select id="selectList" parameterType="TempVO" resultType="TempVO"&gt;  
		&lt;![CDATA[  
			SELECT  
				USER_NAME,USER_NUMBER  
			FROM tbl_testp01Â   
			WHERE 1=1  
		]]&gt;  
		&lt;if test="user_name != null and user_name != ''"&gt;  
		Â 	AND USER_NAME=#{user_name}  
		&lt;/if&gt;  
		&lt;if test="user_number != null Â and user_number != ''"&gt;  
		Â 	AND USER_NUMBER=#{user_number}  
		Â &lt;/if&gt;		Â   
	&lt;/select&gt;  
	&lt;insert id="insert_tbl_testp01"&gt;  
			INSERT INTO tbl_testp01Â   
				( user_name  
				Â Â , user_number )  
			VALUES ( #{user_name}  
				Â Â , #{user_number} Â )  
	&lt;/insert&gt;  
&lt;/mapper&gt;  
  
- - - - - -


JAVAíŒŒì¼
- @Controller  
public class ExController
- @Service("exService")  
public class ExServiceImpl
- @Mapper("exMapper")  
public interface ExMapper
// mapper_SQL_mysqlì—ì„œÂ namespaceë¡œ ì§€ì •ëœ ì¸í„°í˜ì´ìŠ¤,Â ExServiceImpl ì—ì„œÂ (List&lt;TempVO&gt;) exMapper.selectList(vo); ì²˜ëŸ¼ ë°”ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.


DAOë¥¼ ì—†ì´ ì‚¬ìš©í–ˆë‹¤. Mapperë¡œ ì„¤ì •ë˜ë©´ ìë™ìœ¼ë¡œ DAOë¡œ ë§Œë“¤ì–´ë²„ë¦¬ëŠ” ë“¯... ì–´ë–»ê²Œ ê·¸ë˜ë˜ëŠ”ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ.
- - - - - -

ì¿¼ë¦¬ë¥¼ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ í•  ê²½ìš°

  


import java.util.List;
  

import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Select;
  

import egovframework.rte.psl.dataaccess.mapper.Mapper;
  

import temp.example.TempVO;
  

@Mapper("exMapperByAnnotation")
public interface ExMapperByAnnotation {
		
	/**
	 * ê¸€ì„ ì¡°íšŒí•œë‹¤.
	 * @param vo - ì¡°íšŒí•  ì •ë³´ê°€ ë‹´ê¸´ SampleVO
	 * @return ì¡°íšŒí•œ ê¸€
	 * @exception Exception
	 */
	@Select("SELECT USER_NAME,USER_NUMBER FROM tbl_testp01 WHERE 1=1 AND USER_NAME=#{user_name} AND USER_NUMBER=#{user_number}")
	List&lt;TempVO&gt; selectListByAnnotation(TempVO vo) throws Exception;
	
	@Insert("INSERT INTO tbl_testp01 ( user_name , user_number ) VALUES ( #{user_name} , #{user_number} Â )")
	void insert_tbl_testp01ByAnnotation(TempVO vo) throws Exception;
	
}

  

mapperë¥¼ ìœ„ì²˜ëŸ¼ í•œë‹¤.
interfaceë¼ì„œ if ë“±ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ì–´ì„œ ë‚œê°í•˜ë„¤.
ë™ì  ì¿¼ë¦¬ê°€ ì§€ì›ì•ˆëœë‹¤.  
${XXXX}ë¥¼ ì“¸ ìˆ˜ ìˆëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•´ë´ì•¼ê² ë„¤.
  
  




***
[ğŸ”—original-link](http://www.mins01.com/mh/tech/read/866)