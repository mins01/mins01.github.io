---
title: "URL의 queryString (qstr,search) 를 연관배열(객체)로 반환하는 함수"
date: 2013-04-11 16:24:40 +0900
categories: [javascript]
---

&lt;div&gt;/**&lt;/div&gt;&lt;div&gt;* parseQstr&lt;/div&gt;&lt;div&gt;* String qstr : URL의 QueryString, location.search 등&lt;/div&gt;&lt;div&gt;* bool decode : 받은 값을 디코딩 처리할 것인가?(옵션)&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&amp;lt;div&amp;gt;function parseQstr(qstr,decode){&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;if(decode==undefined){decode = false;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;var pt = /(?:\?|&amp;amp;amp;amp;|^)([^&amp;amp;amp;amp;=]+)=([^&amp;amp;amp;amp;=]+)(?:&amp;amp;amp;amp;|$)/;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;//var arr = qstr.match(pt);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;//var arr = pt.exec(qstr);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;var Rs = {};&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;var arr,k,v;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;var qarr = qstr.split('&amp;amp;amp;amp;');&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;for(var i=0,m=qarr.length;i&amp;amp;amp;lt;m;i++){&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;arr = qarr[i].match(pt);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;if(arr == null) continue;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;k = arr[1];&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;if(decode){&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;v = arr[2];&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}else{&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;v = decodeURIComponent(arr[2].replace('+',' '));&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;if(!Rs.hasOwnProperty(k)){&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;Rs[k] = v;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}else if(Rs[k].constructor == String){&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;Rs[k] = [Rs[k]];&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;Rs[k].push(v);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}else{&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;Rs[k].push(v);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;return Rs&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;}&amp;lt;/div&amp;gt;&lt;/div&gt;var qstr = '?UnitId=24006&amp;amp;nick=공대여자&amp;amp;nick=공대여자2&amp;amp;UUN=632a4c164e425e695dbbf243d5ba201b';var Rs = parseQstr(qstr);- - - - - -

결과는  
1. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;Rs&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-object" style="box-sizing: border-box; position: static; display: inline; vertical-align: top;" title="Object"&gt;Object&lt;/span&gt;
1. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;UUN&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-string" style="box-sizing: border-box; color: rgb(196, 26, 22); white-space: pre;" title="632a4c164e425e695dbbf243d5ba201b"&gt;"632a4c164e425e695dbbf243d5ba201b"&lt;/span&gt;
2. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;UnitId&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-string" style="box-sizing: border-box; color: rgb(196, 26, 22); white-space: pre;" title="24006"&gt;"24006"&lt;/span&gt;
3. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;nick&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-array" style="box-sizing: border-box; position: relative; display: inline-block; vertical-align: top;" title="Array[2]"&gt;Array[2]&lt;/span&gt;
1. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;0&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-string" style="box-sizing: border-box; color: rgb(196, 26, 22); white-space: pre;" title="공대여자"&gt;"공대여자"&lt;/span&gt;
2. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;1&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-string" style="box-sizing: border-box; color: rgb(196, 26, 22); white-space: pre;" title="공대여자2"&gt;"공대여자2"&lt;/span&gt;
3. &lt;span class="name dimmed" style="box-sizing: border-box; color: rgb(136, 19, 145); opacity: 0.6;"&gt;length&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-number" style="box-sizing: border-box; color: rgb(28, 0, 207);" title="2"&gt;2&lt;/span&gt;



이런 모양이 됨.-------=--------만들고 보니깐_M 에 거의 같은게 있네...


[🔗link](http://www.mins01.com/mh/tech/read/821)