---
title: "URL의 queryString (qstr,search) 를 연관배열(객체)로 반환하는 함수"
date: 2013-04-11 16:24:40 +0900
categories: [javascript]
---

/*** parseQstr* String qstr : URL의 QueryString, location.search 등* bool decode : 받은 값을 디코딩 처리할 것인가?(옵션)*/&lt;div&gt;function parseQstr(qstr,decode){&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;if(decode==undefined){decode = false;}&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;var pt = /(?:\?|&amp;amp;amp;|^)([^&amp;amp;amp;=]+)=([^&amp;amp;amp;=]+)(?:&amp;amp;amp;|$)/;&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;//var arr = qstr.match(pt);&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;//var arr = pt.exec(qstr);&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;var Rs = {};&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;var arr,k,v;&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;var qarr = qstr.split('&amp;amp;amp;');&lt;/div&gt;&lt;div&gt;&amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;for(var i=0,m=qarr.length;i&amp;lt;m&amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;arr = qarr[i].match(pt);&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;if(arr == null) continue;&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;k = arr[1];&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;if(decode){&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;v = arr[2];&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;}else{&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;v = decodeURIComponent(arr[2].replace('+',' '));&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;}&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;if(!Rs.hasOwnProperty(k)){&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;Rs[k] = v;&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;}else if(Rs[k].constructor == String){&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;Rs[k] = [Rs[k]];&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;Rs[k].push(v);&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;}else{&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;Rs[k].push(v);&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;}&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;}&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;&amp;amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;amp;gt;&amp;amp;amp;lt;/span&amp;amp;amp;gt;return Rs&amp;amp;lt;/div&amp;amp;gt;&amp;amp;lt;div&amp;amp;gt;}&amp;amp;lt;/div&amp;amp;gt;&amp;lt;/m&amp;gt;&lt;/div&gt;var qstr = '?UnitId=24006&amp;amp;nick=공대여자&amp;amp;nick=공대여자2&amp;amp;UUN=632a4c164e425e695dbbf243d5ba201b';var Rs = parseQstr(qstr);- - - - - -&#xD;
&#xD;
결과는  &#xD;
1. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;Rs&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-object" style="box-sizing: border-box; position: static; display: inline; vertical-align: top;" title="Object"&gt;Object&lt;/span&gt;&#xD;
1. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;UUN&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-string" style="box-sizing: border-box; color: rgb(196, 26, 22); white-space: pre;" title="632a4c164e425e695dbbf243d5ba201b"&gt;"632a4c164e425e695dbbf243d5ba201b"&lt;/span&gt;&#xD;
2. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;UnitId&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-string" style="box-sizing: border-box; color: rgb(196, 26, 22); white-space: pre;" title="24006"&gt;"24006"&lt;/span&gt;&#xD;
3. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;nick&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-array" style="box-sizing: border-box; position: relative; display: inline-block; vertical-align: top;" title="Array[2]"&gt;Array[2]&lt;/span&gt;&#xD;
1. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;0&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-string" style="box-sizing: border-box; color: rgb(196, 26, 22); white-space: pre;" title="공대여자"&gt;"공대여자"&lt;/span&gt;&#xD;
2. &lt;span class="name" style="box-sizing: border-box; color: rgb(136, 19, 145);"&gt;1&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-string" style="box-sizing: border-box; color: rgb(196, 26, 22); white-space: pre;" title="공대여자2"&gt;"공대여자2"&lt;/span&gt;&#xD;
3. &lt;span class="name dimmed" style="box-sizing: border-box; color: rgb(136, 19, 145); opacity: 0.6;"&gt;length&lt;/span&gt;&lt;span class="separator" style="box-sizing: border-box;"&gt;: &lt;/span&gt;&lt;span class="value console-formatted-number" style="box-sizing: border-box; color: rgb(28, 0, 207);" title="2"&gt;2&lt;/span&gt;&#xD;
&#xD;
&#xD;
&#xD;
이런 모양이 됨.-------=--------만들고 보니깐_M 에 거의 같은게 있네...


[🔗link](http://www.mins01.com/mh/tech/read/821)