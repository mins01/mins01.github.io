---
title: "ë¼ë¼ë²¨, laravel ë¡œ ìƒ˜í”Œ ë§Œë“¤ì–´ ë³´ì. (4)(end) view , controller"
date: 2019-01-11 11:16:58 +0900
categories: [ë¼ë¼ë²¨, laravel, ìƒ˜í”Œ, sample]
---

### controller ìˆ˜ì •

app\Http\Controllers\SimpleCommentController.php  
`<?php <br></br>namespace App\Http\Controllers;<br></br>use App\SimpleComment;use Illuminate\Http\Request;<br></br>class SimpleCommentController extends Controller{Â  /**Â  * Display a listing of the resource.Â  *Â  * @return \Illuminate\Http\ResponseÂ  */Â  public function index()Â  {Â  Â  return [Â  Â  Â  'result'=&gt;true,Â  Â  Â  'count' =&gt; SimpleComment::count(),Â  Â  Â  'simpleComments' =&gt; SimpleComment::lists(),Â  Â  ];Â  Â  // return View('sc/index');Â  Â  //Â  }Â Â Â  /**Â  * Store a newly created resource in storage.Â  *Â  * @paramÂ  \Illuminate\Http\RequestÂ  $requestÂ  * @return \Illuminate\Http\ResponseÂ  */Â  public function store(Request $request)Â  {Â  Â  //Â  }Â Â Â  /**Â  * Display the specified resource.Â  *Â  * @paramÂ  \App\SimpleCommentÂ  $simpleCommentÂ  * @return \Illuminate\Http\ResponseÂ  */Â  public function show(SimpleComment $simpleComment)Â  {Â  Â  //Â  }Â Â Â  /**Â  * Update the specified resource in storage.Â  *Â  * @paramÂ  \Illuminate\Http\RequestÂ  $requestÂ  * @paramÂ  \App\SimpleCommentÂ  $simpleCommentÂ  * @return \Illuminate\Http\ResponseÂ  */Â  public function update(Request $request, SimpleComment $simpleComment)Â  {Â  Â  if(!$simpleComment-&gt;checkScPass($request-&gt;input('sc_pass'))){Â  Â  Â  return [Â  Â  Â  Â  'result'=&gt;false,Â  Â  Â  Â  'message'=&gt;'Incorrect password',Â  Â  Â  ];Â  Â  }Â  Â  $simpleComment-&gt;update($request-&gt;all());Â  Â  return $this-&gt;index();}Â Â Â  /**Â  * Remove the specified resource from storage.Â  *Â  * @paramÂ  \App\SimpleCommentÂ  $simpleCommentÂ  * @return \Illuminate\Http\ResponseÂ  */Â  //Â $request ë¥¼ ì¶”ê°€, ì œì–´ ì—­ì „ìœ¼ë¡œ ì•Œì•„ì„œ ë°ì´í„°ë¥¼ ì „ë‹¬ í•´ ì¤€ë‹¤.Â  public function destroy(Request $request, SimpleComment $simpleComment)Â  {Â  Â  if(!$simpleComment-&gt;checkScPass($request-&gt;input('sc_pass'))){Â  Â  Â  return [Â  Â  Â  Â  'result'=&gt;false,Â  Â  Â  Â  'message'=&gt;'Incorrect password',Â  Â  Â  ];Â  Â  }Â  Â  $simpleComment-&gt;delete();Â  Â  return $this-&gt;index();Â  }}<h3>APIìª½ route ìˆ˜ì • (ê²½ë¡œê°€ ëª¨ë¸ëª…ì— ì•ˆ ë§ìœ¼ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ëª¨ë¸ì„ ì œëŒ€ë¡œ ëª» ê°€ì ¸ì˜®)</h3>routes\api.php<br></br><strike>Route::resource('sc', 'SimpleCommentController');</strike>Route::resource('simpleComment', 'SimpleCommentController');<h3>web ìª½ route ì¶”ê°€</h3>routes\web.phpRoute::any('/sc','WebSimpleCommentController@index');<br></br><h3>web ìª½ controller ì¶”ê°€</h3>app\Http\Controllers\WebSimpleCommentController.php<?php <br></br>namespace App\Http\Controllers;<br></br>use Illuminate\Http\Request;<br></br>class WebSimpleCommentController extends Controller{protected $title='SimpleComment';Â  Â  public function index($value='')Â  Â  {Â  Â  return View('sc.lists',['title'=&gt;$this-&gt;title]);Â  Â  }}<h3>web ìª½ view íŒŒì¼</h3>resources\views\sc\lists.blade.php<code style="font-size: 12.6px;">@extends('sc.master')<br></br>@section('title', $title)<br></br>@section('content')<h1>SimpleComment</h1><ul class="list-group" v-for="sc in res.simpleComments"></ul><li class="list-group-item"></li><form action="{{ route('simpleComment.update',':sc_id') }}" onsubmit="ajax_action.action(this);return false;"></form>{{ csrf_field() }}<input disabled="disabled" name="_method" type="text" value=""></input><input name="sc_id" readonly="readonly" type="text" v-model="sc.sc_id"></input><input name="sc_pass" type="password"></input><input name="sc_name" type="text" v-model="sc.sc_name"></input><input name="sc_comment" type="text" v-model="sc.sc_comment"></input><input disabled="disabled" type="created_at" v-model="sc.created_at"></input><input disabled="disabled" type="updated_at" v-model="sc.updated_at"></input><button onclick="this.form._method.value='PUT'">modify</button><button onclick="this.form._method.value='DELETE'">delete</button><br></br><script></script>window.Laravel = {!! json_encode([Â 'csrfToken' =&gt; csrf_token(),]) !!};Â  Â  Â  Â  // vue.jsì˜ appì„ ìƒì„±var sc_app = new Vue({el: '#sc_app',data: {res:{'result':null,message:'','count':0,'simpleComments':[]},}})$(function(){ajax_action.lists();})var ajax_action = {"lists":function(){var url = "{{ route('simpleComment.index') }}";$.ajax({url: url,type: 'GET', //GETdataType: 'json', //xml, json, script, jsonp, or html// data: post_data,}).done(function(rData) { //í†µì‹  ì„±ê³µ ì‹œ í˜¸ì¶œconsole.log("success");if(!rData.result){alert(rData.message)}else{sc_app.res = rData;}}).fail(function() { //í†µì‹  ì‹¤íŒ¨ ì‹œ í˜¸ì¶œconsole.log("error");}).always(function() { //ì„±ê³µ/ì‹¤íŒ¨ í›„ í˜¸ì¶œ.console.log("complete");});},"action":function(f){var url = f.action.replace(":sc_id",f.sc_id.value);var post_data = $(f).serialize();$.ajax({url: url,type: f._method.value, //GETdataType: 'json', //xml, json, script, jsonp, or htmldata: post_data,}).done(function(rData) { //í†µì‹  ì„±ê³µ ì‹œ í˜¸ì¶œconsole.log("success");if(!rData.result){alert(rData.message)}else{sc_app.res = rData;}}).fail(function(e) { //í†µì‹  ì‹¤íŒ¨ ì‹œ í˜¸ì¶œconsole.log(e);}).always(function() { //ì„±ê³µ/ì‹¤íŒ¨ í›„ í˜¸ì¶œ.console.log("complete");});f._method.value = '';}}<br></br><code style="white-space:pre">API LISTS+--------+-----------+------------------+------------+------------------------------------------------------+------------+| Domain | MethodÂ  Â  | URIÂ  Â  Â  Â  Â  Â  Â  | NameÂ  Â  Â  Â | ActionÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â | Middleware |+--------+-----------+------------------+------------+------------------------------------------------------+------------+|Â  Â  Â  Â  | GET|HEADÂ  | api/scÂ  Â  Â  Â  Â  Â | sc.indexÂ  Â | App\Http\Controllers\SimpleCommentController@indexÂ  Â | apiÂ  Â  Â  Â  ||Â  Â  Â  Â  | POSTÂ  Â  Â  | api/scÂ  Â  Â  Â  Â  Â | sc.storeÂ  Â | App\Http\Controllers\SimpleCommentController@storeÂ  Â | apiÂ  Â  Â  Â  ||Â  Â  Â  Â  | GET|HEADÂ  | api/sc/createÂ  Â  | sc.createÂ  | App\Http\Controllers\SimpleCommentController@createÂ  | apiÂ  Â  Â  Â  ||Â  Â  Â  Â  | GET|HEADÂ  | api/sc/{sc}Â  Â  Â  | sc.showÂ  Â  | App\Http\Controllers\SimpleCommentController@showÂ  Â  | apiÂ  Â  Â  Â  ||Â  Â  Â  Â  | PUT|PATCH | api/sc/{sc}Â  Â  Â  | sc.updateÂ  | App\Http\Controllers\SimpleCommentController@updateÂ  | apiÂ  Â  Â  Â  ||Â  Â  Â  Â  | DELETEÂ  Â  | api/sc/{sc}Â  Â  Â  | sc.destroy | App\Http\Controllers\SimpleCommentController@destroy | apiÂ  Â  Â  Â  ||Â  Â  Â  Â  | GET|HEADÂ  | api/sc/{sc}/edit | sc.editÂ  Â  | App\Http\Controllers\SimpleCommentController@editÂ  Â  | apiÂ  Â  Â  Â  |+--------+-----------+------------------+------------+------------------------------------------------------+------------+@endsection<br></br>`


[ğŸ”—link](http://www.mins01.com/mh/tech/read/1245)