---
title: "laravel Model ë¼ë¼ë²¨ ëª¨ë¸ ê´€ë ¨"
date: 2019-01-07 12:57:56 +0900
categories: 
---
  

### ëª¨ë¸ íŒŒì¼ ê¸°ë³¸í˜•

  

&lt;?php
  

namespace App;
use Illuminate\Database\Eloquent\Model;
  

class Task extends Model
{
	// protected $table ='my_task_table'; //ì—†ì„ ê²½ìš° Class ëª…ì´ ë³€ê²½ë˜ì„œ ì‚¬ìš©ë¨ (ì£¼ì˜: ì¤‘ê°„ì— ëŒ€ë¬¸ìê°€ ìˆìœ¼ë©´ '_ì†Œë¬¸ì' ì²˜ëŸ¼ ë³€ê²½ë¨)
	// protected $conntection = 'sqlite'; //config/database.php ì†ì˜ ì»¤ë„¥ì…˜ ì„¤ì •
	// protected $primaryKey ='task_id'; //ì—†ì„ ê²½ìš° id ê°€ ê¸°ë³¸ê°’
	// public $timestamps = 'false'; //Carbon í´ë˜ìŠ¤Â  ì‚¬ìš©ìœ ë¬´, false ë©´ ë¬¸ìì—´ë¡œ ì²˜ë¦¬í•¨
	// protected $dates =['due_date','assigned_date']; //Â Carbon í´ë˜ìŠ¤ ì ìš© í•„ë“œëª…, created_at, updated_at ì€ ìë™
	// protected $dateFormat = 'Y-m-d H:i:s'; //ë‚ ì§œí˜•íƒœ
	// protected $fillable = ['name','project_id']; //insert, update í•  ìˆ˜ ìˆëŠ” í•„ë“œë¥¼ ì„¤ì •í•œë‹¤.Â  ['*'] ìœ¼ë¡œ ì „ì²´ë¥¼ í’€ ìˆ˜ ìˆë‹¤. $garded ì™€ ì¤‘ë³µ ì‚¬ìš© ë¶ˆê°€  
	-&gt;['*'] ëŠ” ì•ˆëœë‹¤. í•˜ê³  ì‹¶ìœ¼ë©´ $guarded=[]; ë¥¼ ëŒ€ì‹  ì‚¬ìš©í•˜ì
	// protected $guarded= ['description']; //insert, update í•  ìˆ˜ ì—†ëŠ” í•„ë“œë¥¼ ì„¤ì •í•œë‹¤. $fillableÂ  ì™€ ì¤‘ë³µ ì‚¬ìš© ë¶ˆê°€
}

- - - - - -

### ëª¨ë¸ ì‚¬ìš©ë²•


use App\Task;
  

$tasks = Task::all();
// =&gt; select * from tasks;
$task = Task::find($id); //ê°’ì´ ì—†ìœ¼ë©´ null
$task = Task::findOrFail($id);Â  //ê°’ì´ ì—†ìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ(ì—ëŸ¬)
// =&gt; select * from tasks where id='id';
  

$task = Task::where('field','=','val')-&gt;orderBy('field','desc')-&gt;take(3)-&gt;skip(2);Â 
//$task-&gt;toSql() //select * from `tasks` where `field` = ? order by `field` desc limit 3 offset 2
//$task-&gt;getBindings() //array:1 [ 0 =&gt; "val"]
  
  
  
  
- - - - - -

### escape ë°©ë²•

DB::connection()-&gt;getPdo()-&gt;quote("string to quote");
ë  ìˆ˜ ìˆìœ¼ë©´ bind í•˜ë¼
  
### raw ì¿¼ë¦¬

$results = DB::select('select * from users where id = :id', ['id' =&gt; 1]);Â 
DB::insert('insert into users (id, name) values (?, ?)', [1, 'Dayle']);

$affected = DB::update('update users set votes = 100 where name = ?', ['John']);

$deleted = DB::delete('delete from users');

DB::statement('drop table users');
  
### ì¿¼ë¦¬ë¡œê·¸

ë²„ì „ë³„ë¡œ ì‚¬ìš©ë²• ì°¨ì´ê°€ í¬ë‹¤!
  
$task = new Task;
$task-&gt;getConnection()-&gt;enableQueryLog();

print_r($task-&gt;getConnection()-&gt;getQueryLog());
Array
(
Â  Â  [0] =&gt; Array
Â  Â  Â  Â  (
Â  Â  Â  Â  Â  Â  [query] =&gt; insert into `tasks` (`name`, `project_id`, `updated_at`, `created_at`) values (?, ?, ?, ?)
Â  Â  Â  Â  Â  Â  [bindings] =&gt; Array
Â  Â  Â  Â  Â  Â  Â  Â  (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [0] =&gt; ì˜ˆì œ ì‘ì„±
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [1] =&gt; 45
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [2] =&gt; 2019-01-07 15:00:57
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [3] =&gt; 2019-01-07 15:00:57
Â  Â  Â  Â  Â  Â  Â  Â  )
  

Â  Â  Â  Â  Â  Â  [time] =&gt; 6.16
Â  Â  Â  Â  )
  

Â  Â  [1] =&gt; Array
Â  Â  Â  Â  (
Â  Â  Â  Â  Â  Â  [query] =&gt; update `tasks` set `name` = ?, `updated_at` = ? where `id` = ?
Â  Â  Â  Â  Â  Â  [bindings] =&gt; Array
Â  Â  Â  Â  Â  Â  Â  Â  (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [0] =&gt; ì˜ˆì œ ìˆ˜ì •
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [1] =&gt; 2019-01-07 15:00:59
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [2] =&gt; 25
Â  Â  Â  Â  Â  Â  Â  Â  )
  

Â  Â  Â  Â  Â  Â  [time] =&gt; 4.7
Â  Â  Â  Â  )

  
  
- - - - - -

### soft deletes

    <code class=" language-php" style="font-family: "Operator Mono", "Fira Code", Consolas, Monaco, "Andale Mono", monospace; font-size: 12px; color: black; text-shadow: white 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; line-height: 2; tab-size: 4; hyphens: none; vertical-align: middle;">namespace App;
    
    use Illuminate\Database\Eloquent\Model;
    use Illuminate\Database\Eloquent\SoftDeletes;
    
    class Flight extends Model
    {
        use SoftDeletes;
    
        /**
         * The attributes that should be mutated to dates.
         *
         * @var array
         */
        protected $dates = ['deleted_at'];
    }






***
[ğŸ”—original-link](http://www.mins01.com/mh/tech/read/1233)