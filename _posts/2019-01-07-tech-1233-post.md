---
title: "laravel Model ë¼ë¼ë²¨ ëª¨ë¸ ê´€ë ¨"
date: 2019-01-07 12:57:56 +0900
categories: [laravel, model, ë¼ë¼ë²¨, ëª¨ë¸]
---

### ëª¨ë¸ íŒŒì¼ ê¸°ë³¸í˜•

  
&lt;?php &lt;/div?&gt;
&lt;div&gt;  &amp;#xD;
&lt;/div&gt;&lt;div&gt;namespace App;&lt;/div&gt;&lt;div&gt;use Illuminate\Database\Eloquent\Model;&lt;/div&gt;&lt;div&gt;  &amp;#xD;
&lt;/div&gt;&lt;div&gt;class Task extends Model&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&amp;lt;span style="white-space: pre;"&amp;gt;&amp;lt;/span&amp;gt;// protected $table ='my_task_table'; //ì—†ì„ ê²½ìš° Class ëª…ì´ ë³€ê²½ë˜ì„œ ì‚¬ìš©ë¨ (ì£¼ì˜: ì¤‘ê°„ì— ëŒ€ë¬¸ìê°€ ìˆìœ¼ë©´ '_ì†Œë¬¸ì' ì²˜ëŸ¼ ë³€ê²½ë¨)&lt;/div&gt;&lt;div&gt;&amp;lt;span style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;// protected $conntection = 'sqlite'; //config/database.php ì†ì˜ ì»¤ë„¥ì…˜ ì„¤ì •&lt;/div&gt;&lt;div&gt;&amp;lt;span style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;// protected $primaryKey ='task_id'; //ì—†ì„ ê²½ìš° id ê°€ ê¸°ë³¸ê°’&lt;/div&gt;&lt;div&gt;&amp;lt;span style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;// public $timestamps = 'false'; //Carbon í´ë˜ìŠ¤Â  ì‚¬ìš©ìœ ë¬´, false ë©´ ë¬¸ìì—´ë¡œ ì²˜ë¦¬í•¨&lt;/div&gt;&lt;div&gt;&amp;lt;span style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;// protected $dates =['due_date','assigned_date']; //Â Carbon í´ë˜ìŠ¤ ì ìš© í•„ë“œëª…, created_at, updated_at ì€ ìë™&lt;/div&gt;&lt;div&gt;&amp;lt;span style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;// protected $dateFormat = 'Y-m-d H:i:s'; //ë‚ ì§œí˜•íƒœ&lt;/div&gt;&lt;div&gt;&amp;lt;span style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;// protected $fillable = ['name','project_id']; //insert, update í•  ìˆ˜ ìˆëŠ” í•„ë“œë¥¼ ì„¤ì •í•œë‹¤.Â  ['*'] ìœ¼ë¡œ ì „ì²´ë¥¼ í’€ ìˆ˜ ìˆë‹¤. $garded ì™€ ì¤‘ë³µ ì‚¬ìš© ë¶ˆê°€  &amp;#xD;
&amp;lt;span style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;-&amp;amp;gt;['*'] ëŠ” ì•ˆëœë‹¤. í•˜ê³  ì‹¶ìœ¼ë©´ $guarded=[]; ë¥¼ ëŒ€ì‹  ì‚¬ìš©í•˜ì&lt;/div&gt;&lt;div&gt;&amp;lt;span style="white-space:pre"&amp;gt;&amp;lt;/span&amp;gt;// protected $guarded= ['description']; //insert, update í•  ìˆ˜ ì—†ëŠ” í•„ë“œë¥¼ ì„¤ì •í•œë‹¤. $fillableÂ  ì™€ ì¤‘ë³µ ì‚¬ìš© ë¶ˆê°€&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;- - - - - -&#xD;
&#xD;
### ëª¨ë¸ ì‚¬ìš©ë²•&#xD;
&#xD;
use App\Task;  &#xD;
$tasks = Task::all();// =&amp;gt; select * from tasks;$task = Task::find($id); //ê°’ì´ ì—†ìœ¼ë©´ null$task = Task::findOrFail($id);Â  //ê°’ì´ ì—†ìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ(ì—ëŸ¬)// =&amp;gt; select * from tasks where id='id';  &#xD;
$task = Task::where('field','=','val')-&amp;gt;orderBy('field','desc')-&amp;gt;take(3)-&amp;gt;skip(2);Â //$task-&amp;gt;toSql() //select * from `tasks` where `field` = ? order by `field` desc limit 3 offset 2//$task-&amp;gt;getBindings() //array:1 [ 0 =&amp;gt; "val"]  &#xD;
  &#xD;
  &#xD;
  &#xD;
- - - - - -&#xD;
&#xD;
### escape ë°©ë²•

DB::connection()-&amp;gt;getPdo()-&amp;gt;quote("string to quote");ë  ìˆ˜ ìˆìœ¼ë©´ bind í•˜ë¼  &#xD;
### raw ì¿¼ë¦¬

$results = DB::select('select * from users where id = :id', ['id' =&amp;gt; 1]);Â &lt;div&gt;DB::insert('insert into users (id, name) values (?, ?)', [1, 'Dayle']);&lt;/div&gt;&lt;div&gt;$affected = DB::update('update users set votes = 100 where name = ?', ['John']);&lt;/div&gt;&lt;div&gt;$deleted = DB::delete('delete from users');&lt;/div&gt;DB::statement('drop table users');  &#xD;
### ì¿¼ë¦¬ë¡œê·¸

&lt;div&gt;ë²„ì „ë³„ë¡œ ì‚¬ìš©ë²• ì°¨ì´ê°€ í¬ë‹¤!&lt;/div&gt;&lt;div&gt;  &amp;#xD;
$task = new Task;&lt;/div&gt;&lt;div&gt;$task-&amp;amp;gt;getConnection()-&amp;amp;gt;enableQueryLog();&lt;/div&gt;print_r($task-&amp;gt;getConnection()-&amp;gt;getQueryLog());&lt;div&gt;Array&lt;/div&gt;&lt;div&gt;(&lt;/div&gt;&lt;div&gt;Â  Â  [0] =&amp;amp;gt; Array&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  (&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  [query] =&amp;amp;gt; insert into `tasks` (`name`, `project_id`, `updated_at`, `created_at`) values (?, ?, ?, ?)&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  [bindings] =&amp;amp;gt; Array&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  (&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [0] =&amp;amp;gt; ì˜ˆì œ ì‘ì„±&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [1] =&amp;amp;gt; 45&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [2] =&amp;amp;gt; 2019-01-07 15:00:57&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [3] =&amp;amp;gt; 2019-01-07 15:00:57&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  )&lt;/div&gt;&lt;div&gt;  &amp;#xD;
&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  [time] =&amp;amp;gt; 6.16&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  )&lt;/div&gt;&lt;div&gt;  &amp;#xD;
&lt;/div&gt;&lt;div&gt;Â  Â  [1] =&amp;amp;gt; Array&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  (&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  [query] =&amp;amp;gt; update `tasks` set `name` = ?, `updated_at` = ? where `id` = ?&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  [bindings] =&amp;amp;gt; Array&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  (&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [0] =&amp;amp;gt; ì˜ˆì œ ìˆ˜ì •&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [1] =&amp;amp;gt; 2019-01-07 15:00:59&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [2] =&amp;amp;gt; 25&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  Â  Â  )&lt;/div&gt;&lt;div&gt;  &amp;#xD;
&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  Â  Â  [time] =&amp;amp;gt; 4.7&lt;/div&gt;&lt;div&gt;Â  Â  Â  Â  )&lt;/div&gt;  &#xD;
  &#xD;
- - - - - -&#xD;
&#xD;
### soft deletes&#xD;
&#xD;
    &lt;code class=" language-php" style="font-family: "Operator Mono", "Fira Code", Consolas, Monaco, "Andale Mono", monospace; font-size: 12px; color: black; text-shadow: white 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; line-height: 2; tab-size: 4; hyphens: none; vertical-align: middle;"&gt;&lt;span class="token keyword" style="color: rgb(0, 119, 170);"&gt;namespace&lt;/span&gt;&lt;span class="token package"&gt;App&lt;/span&gt;&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;;&lt;/span&gt;&lt;span class="token keyword" style="color: rgb(0, 119, 170);"&gt;use&lt;/span&gt;&lt;span class="token package"&gt;Illuminate&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;\&lt;/span&gt;Database&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;\&lt;/span&gt;Eloquent&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;\&lt;/span&gt;Model&lt;/span&gt;&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;;&lt;/span&gt;&lt;span class="token keyword" style="color: rgb(0, 119, 170);"&gt;use&lt;/span&gt;&lt;span class="token package"&gt;Illuminate&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;\&lt;/span&gt;Database&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;\&lt;/span&gt;Eloquent&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;\&lt;/span&gt;SoftDeletes&lt;/span&gt;&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;;&lt;/span&gt;&lt;span class="token keyword" style="color: rgb(0, 119, 170);"&gt;class&lt;/span&gt;&lt;span class="token class-name"&gt;Flight&lt;/span&gt;&lt;span class="token keyword" style="color: rgb(0, 119, 170);"&gt;extends&lt;/span&gt;&lt;span class="token class-name"&gt;Model&lt;/span&gt;&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;{&lt;/span&gt;&lt;span class="token keyword" style="color: rgb(0, 119, 170);"&gt;use&lt;/span&gt;&lt;span class="token package"&gt;SoftDeletes&lt;/span&gt;&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;;&lt;/span&gt;&lt;span class="token comment" spellcheck="true" style="color: rgb(153, 153, 153);"&gt;/**&#xD;
         * The attributes that should be mutated to dates.&#xD;
         *&#xD;
         * @var array&#xD;
         */&lt;/span&gt;&lt;span class="token keyword" style="color: rgb(0, 119, 170);"&gt;protected&lt;/span&gt;&lt;span class="token variable" style="color: rgb(78, 161, 223);"&gt;$dates&lt;/span&gt;&lt;span class="token operator" style="color: rgb(85, 85, 85);"&gt;=&lt;/span&gt;&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;[&lt;/span&gt;&lt;span class="token string" style="color: rgb(46, 125, 50);"&gt;'deleted_at'&lt;/span&gt;&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;]&lt;/span&gt;&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;;&lt;/span&gt;&lt;span class="token punctuation" style="color: rgb(153, 153, 153);"&gt;}&lt;/span&gt;&#xD;
&#xD;
&#xD;



[ğŸ”—link](http://www.mins01.com/mh/tech/read/1233)