---
title: "js Promise 프로미스"
date: 2017-01-26 10:18:08 +0900
categories: [javascript]
---

js Promise 프라미스

  
&lt;div&gt;- [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise")&amp;#xD;
- 한글 : [https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise "https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise") &amp;#xD;
&amp;#xD;
- [https://msdn.microsoft.com/ko-kr/library/dn802826(v=vs.94).aspx](https://msdn.microsoft.com/ko-kr/library/dn802826(v=vs.94).aspx "https://msdn.microsoft.com/ko-kr/library/dn802826(v=vs.94).aspx")&amp;#xD;
- 호환성&amp;#xD;
- PC&amp;#xD;
- Chrome : 32&amp;#xD;
- IE : Edge , 그 미만는 전멸.&amp;#xD;
- FF : 29.0&amp;#xD;
- Opera : 19&amp;#xD;
- Safari : 7.1&amp;#xD;
&amp;#xD;
- Mobile&amp;#xD;
- 안드로이드 브라우저 : X&amp;#xD;
- Chrome : 32&amp;#xD;
- FF 29.0&amp;#xD;
- IE : X&amp;#xD;
- Opera : X&amp;#xD;
&amp;#xD;
&amp;#xD;
- 공대여자 왈.&amp;#xD;
- 프로미스 : 약속하다&amp;#xD;
- [https://www.youtube.com/watch?v=JH1QflWdrdw](https://www.youtube.com/watch?v=JH1QflWdrdw "https://www.youtube.com/watch?v=JH1QflWdrdw")&amp;lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/JH1QflWdrdw" width="560"&amp;gt;&amp;lt;/iframe&amp;gt;&amp;#xD;
&amp;#xD;
- 동작을 미리 만들어 놓음. 다만 사용 할 때 성공(resolve),실패(reject) 함수를 설정한다.&amp;#xD;
- 따지면 콜백 2개 받는건데, 메소드 체이닝으로 선언이 가능하다.&amp;#xD;
- x.then(xxxx).catch(yyyy)&amp;#xD;
&amp;#xD;
&amp;#xD;
- 이 동작은 비 동기로 실행된다.&amp;#xD;
- 즉, 다른 것과 동시 동작이 가능하다.&amp;#xD;
- 즉, 일반 함수처럼 return 값 받아서 바로 서치할 수는 없다.(그렇기에 resolve,reject 함수를 받아서 처리함)&amp;#xD;
&amp;#xD;
- setTimeout 으로도 비슷하게 만들 수 있다.&amp;#xD;
- 다만 프로미스를 사용해서 만들면 좀 더 깔끔하다.&amp;#xD;
&amp;#xD;
&amp;#xD;
&amp;#xD;
&amp;lt;div&amp;gt;-----=-------&amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div&gt;기본 소스&lt;/div&gt;&lt;div&gt;&amp;lt;div&amp;gt;var pr1 = new Promise(&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;function(resolve, reject){ //성공시, 실패시 동작할 함수를 받는다.&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;//...&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;소스 동작&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;...//&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;if(result == success){&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;resolve(result);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}else{&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;reject(result);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;  &amp;amp;#xD;
&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;pr1.then(&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;//resolve 함수 등록&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;function(val){ &amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;alert('처리완료! '+val)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;).catch(&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;//reject 함수 등록&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;function(val){ &amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;alert('처리에러! '+val)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;}&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;);&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;// 여기서 호출된다.&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;lt;span class="Apple-tab-span" style="white-space:pre"&amp;amp;gt;&amp;amp;lt;/span&amp;amp;gt;// pr1.then 이나 pr1.catch 를 설정 "후"에 프로미스가 실행된다.(메소드 체이닝으로 설정할 때 실행되는 것이 아님.)&amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div&gt;  &amp;#xD;
&lt;/div&gt;&lt;div&gt;- - - - - -&amp;#xD;
&amp;#xD;
  &amp;#xD;
### Promise.race&amp;#xD;
&amp;#xD;
&lt;/div&gt;&lt;div&gt;여러 프로미스 객체를 동시 실행해서 빠른 것의 결과만 사용한다.&lt;/div&gt;&lt;div&gt;  &amp;#xD;
&lt;/div&gt;&lt;div&gt;//-- https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise/race 의 예제&lt;/div&gt;&lt;div&gt;  &amp;#xD;
&lt;/div&gt;&lt;div&gt;p2 가 p1 보다 빨리 끝난다.&lt;/div&gt;&lt;div&gt;  &amp;#xD;
&lt;/div&gt;&lt;div&gt;&amp;lt;div&amp;gt;Promise.race([p1, p2]).then(function(value) {&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;  console.log(value); // p2 의 값&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;  // 모두 결정하지만 p2가 더 빠름&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;});&amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div&gt;  &amp;#xD;
&lt;/div&gt;&lt;div&gt;- - - - - -&amp;#xD;
&amp;#xD;
### Promise.all&amp;#xD;
&amp;#xD;
&lt;/div&gt;&lt;div&gt;여러 프로미스 객체를 동시에 실행해서 전부 성공했다면 받는 받을 배열로 가져온다.&lt;/div&gt;&lt;div&gt;그중 하나라도 실패한다면, 실패한 하나만 reject 처리한다.&lt;/div&gt;  
//-- 코드 모양//-- https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise/all 예제 짜집기  
&lt;div&gt;Promise.all([p1, p2, p3]).then(function(values) { &lt;/div&gt;&lt;div&gt;  console.log(values); // [3, 1337, "foo"] &lt;/div&gt;&lt;div&gt;}, function(reason) {&lt;/div&gt;&lt;div&gt;  console.log(reason)&lt;/div&gt;&lt;div&gt;});&lt;/div&gt;  



[🔗link](http://www.mins01.com/mh/tech/read/1054)